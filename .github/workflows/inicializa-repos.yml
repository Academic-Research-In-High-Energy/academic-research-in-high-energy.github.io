name: Smoke (dispatcher)

on:
  workflow_dispatch:
    inputs:
      source:
        description: "who triggered (ui|dispatcher|manual)"
        required: false
        default: "dispatcher"
      target:
        description: "slug/org selected in audit page"
        required: false
        default: ""
      note:
        description: "free text for tracing"
        required: false
        default: ""

permissions:
  contents: read

jobs:
  smoke:
    runs-on: ubuntu-latest
    steps:
      - name: Smoke OK
        run: |
          echo "SMOKE_OK"
          echo "ts_utc=$(date -u +'%Y-%m-%dT%H:%M:%SZ')"
          echo "repo=${GITHUB_REPOSITORY}"
          echo "ref=${GITHUB_REF}"
          echo "sha=${GITHUB_SHA}"
          echo "actor=${GITHUB_ACTOR}"
          echo "source=${{ inputs.source }}"
          echo "target=${{ inputs.target }}"
          echo "note=${{ inputs.note }}"